apiVersion: v1
kind: Pod
metadata:
  name: drup-fs-test
  namespace: ns-portalfront-app
  labels:
    app: front-app
spec:
  serviceAccountName: sa-front-app
  nodeSelector:
    kubernetes.io/os: linux
  containers:
  - name: drup-fs-test
    image: acrtransversalprbeastus2.azurecr.io/portal/front-app:496032
    volumeMounts:
    - name: azure
      mountPath: /opt/front-app/web/sites/default/files
    - name: kv-secrets
      mountPath: /mnt/kv-secrets
      readOnly: true
  volumes:
  - name: kv-secrets
    csi:
      driver: secrets-store.csi.k8s.io
      readOnly: true
      volumeAttributes:
        secretProviderClass: azure-file-secret-provider
  - name: azure
    csi:
      driver: file.csi.azure.com
      readOnly: false
      volumeAttributes:
        secretName: front-app-storage-key
        shareName: portalfront-app-fs
